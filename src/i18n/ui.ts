export const UI_LANG_STORAGE_KEY = "chatwithme_ui_lang";

export type UiLang = "en" | "zh";

export const uiMessages = {
  en: {
    app_title: "ChatWithMe MCP",
    app_subtitle: "Agent-first chat workspace",
    app_powered_by: "Powered by Agents",

    connection_connecting: "connecting",
    connection_connected: "connected",
    connection_disconnected: "disconnected",

    theme_light: "Light mode",
    theme_dark: "Dark mode",
    theme_system: "System mode",
    theme_group: "Theme mode",

    lang_en: "EN",
    lang_zh: "中",
    lang_group: "Language",

    sidebar_sessions: "Sessions",
    sidebar_workspace: "Workspace",
    sidebar_domain_chats: "Chats",
    sidebar_domain_tools: "Tools",
    sidebar_domain_resources: "Resources",
    sidebar_domain_settings: "Settings",
    sidebar_coming_soon_title: "Coming soon",
    sidebar_coming_soon_desc: "This domain will be enabled in the next iteration.",
    sidebar_close: "Close sidebar",
    sidebar_open: "Open menu",
    sidebar_toggle: "Toggle sidebar",

    session_new: "New Chat",
    session_empty: "No conversations yet",
    session_no_messages: "No messages",
    session_delete: "Delete session",
    session_deleted: "Session deleted",

    tabs_label: "Main sections",
    tabs_chat: "Chat",
    tabs_mcp: "MCP Servers",
    tabs_tools_count: "{count} tools",

    chat_empty_title: "Start a conversation",
    chat_empty_with_tools:
      "AI has access to {count} tools (web search, reading). Just ask anything!",
    chat_empty_no_tools: "Connect MCP servers in the MCP tab to enable tool access.",
    chat_placeholder_tools: "Ask anything... (AI can search web & read pages)",
    chat_placeholder_default: "Type a message...",
    live_feed_title: "Live execution feed",
    live_feed_sent: "Message sent. Waiting for agent pipeline...",
    live_feed_phase_context: "context",
    live_feed_phase_model: "model",
    live_feed_phase_thinking: "thinking",
    live_feed_phase_tool: "tool",
    live_feed_phase_heartbeat: "heartbeat",
    live_feed_phase_result: "result",
    live_feed_phase_error: "error",

    mcp_info_title: "Pre-configured MCP Servers",
    mcp_info_desc:
      "Toggle servers on/off to activate or deactivate them. Active servers provide tools that the AI can use automatically during chat.",
    mcp_loading: "Loading servers...",
    mcp_available_servers: "Available Servers",
    mcp_available_tools: "Available Tools",
    mcp_status_active: "Active",
    mcp_status_inactive: "Inactive",
    mcp_toggle_server: "Toggle server {name}",
    mcp_server: "Server",
    mcp_raw_payload: "Raw payload",

    message_delete_success: "Message deleted",
    message_already_deleted: "Message already deleted",
    message_delete_failed: "Failed to delete message: {reason}",
    server_toggle_success: 'Server "{name}" {state}',
    server_toggle_active: "activated",
    server_toggle_inactive: "deactivated",
    server_toggle_failed: "Failed to toggle server: {reason}",

    chat_input_placeholder_connecting: "Connecting...",
    chat_input_placeholder_streaming: "Waiting for response...",
    chat_input_action_send: "Send",
    chat_input_action_stop: "Stop",
    chat_input_action_clear: "Clear input",
    chat_input_expand: "Expand",
    chat_input_collapse: "Compact",
    chat_input_multiline_indicator: "Multiline input enabled",
    chat_input_hint_shortcuts: "Shift+Enter new line, Enter/Ctrl+Enter/Cmd+Enter send",
    chat_input_command_hint: "Command input",
    chat_input_section_tools: "Tools",
    chat_input_section_sessions: "Sessions",
    chat_input_section_actions: "Actions",
    chat_sources_title: "Sources",
    chat_sources_empty: "No snippets available",

    message_actions_copy: "Copy",
    message_actions_copied: "Copied",
    message_actions_copy_message: "Copy message",
    message_actions_copy_status: "Message copied to clipboard",
    message_actions_regenerate: "Regenerate",
    message_actions_regenerate_response: "Regenerate response",
    message_actions_edit: "Edit",
    message_actions_edit_message: "Edit message",
    message_actions_delete: "Delete",
    message_actions_delete_message: "Delete message",
    message_actions_fork: "Fork",
    message_actions_fork_message: "Fork session from message",
    message_actions_save: "Save",
    message_actions_cancel: "Cancel",
    message_edit_success: "Message updated",
    message_edit_noop: "No changes to save",
    message_edit_failed: "Failed to edit message: {reason}",
    message_regenerate_success: "Response regenerated",
    message_regenerate_failed: "Failed to regenerate: {reason}",
    message_fork_success: "Session forked",
    message_fork_failed: "Failed to fork session: {reason}",
    session_fork_title: "Forked Chat",
    chat_back_to_bottom: "Back to bottom",
    chat_message_variant_bubble: "Bubble",
    chat_message_variant_docs: "Docs",
    chat_autoscroll_following: "Following",
    chat_autoscroll_paused: "Paused",
    chat_loading_thinking: "Thinking",

    toaster_region_label: "Notifications",
    toaster_close: "Dismiss notification",
    toaster_hidden_count: "{count} older notifications are hidden",
    inspector_overview: "Workspace Overview",
    inspector_sources: "{count} source groups",
    inspector_live: "Latest Pipeline Events",
    inspector_live_empty: "No live events yet.",
    inspector_telemetry: "Telemetry",
    inspector_telemetry_events: "{count} events",
    inspector_telemetry_empty: "No telemetry events yet."
  },
  zh: {
    app_title: "ChatWithMe MCP",
    app_subtitle: "Agent 优先聊天工作台",
    app_powered_by: "由 Agents 驱动",

    connection_connecting: "连接中",
    connection_connected: "已连接",
    connection_disconnected: "已断开",

    theme_light: "浅色模式",
    theme_dark: "深色模式",
    theme_system: "跟随系统",
    theme_group: "主题模式",

    lang_en: "EN",
    lang_zh: "中",
    lang_group: "语言",

    sidebar_sessions: "会话",
    sidebar_workspace: "工作台",
    sidebar_domain_chats: "聊天",
    sidebar_domain_tools: "工具",
    sidebar_domain_resources: "资源",
    sidebar_domain_settings: "设置",
    sidebar_coming_soon_title: "即将上线",
    sidebar_coming_soon_desc: "该域会在下一轮迭代中开放。",
    sidebar_close: "关闭侧栏",
    sidebar_open: "打开菜单",
    sidebar_toggle: "切换侧栏",

    session_new: "新建会话",
    session_empty: "暂无会话",
    session_no_messages: "暂无消息",
    session_delete: "删除会话",
    session_deleted: "会话已删除",

    tabs_label: "主区域",
    tabs_chat: "聊天",
    tabs_mcp: "MCP 服务",
    tabs_tools_count: "{count} 个工具",

    chat_empty_title: "开始一段对话",
    chat_empty_with_tools: "AI 已连接 {count} 个工具（网页搜索、页面读取），可直接提问。",
    chat_empty_no_tools: "请在 MCP 标签页连接服务后再使用工具能力。",
    chat_placeholder_tools: "直接提问...（AI 可搜索网页并读取页面）",
    chat_placeholder_default: "输入消息...",
    live_feed_title: "实时执行反馈",
    live_feed_sent: "消息已发送，等待 Agent 开始处理...",
    live_feed_phase_context: "上下文",
    live_feed_phase_model: "模型",
    live_feed_phase_thinking: "思考",
    live_feed_phase_tool: "工具",
    live_feed_phase_heartbeat: "心跳",
    live_feed_phase_result: "结果",
    live_feed_phase_error: "错误",

    mcp_info_title: "预配置 MCP 服务",
    mcp_info_desc: "可切换服务启用/停用。启用后，AI 会在聊天中自动使用这些服务提供的工具。",
    mcp_loading: "正在加载服务...",
    mcp_available_servers: "可用服务",
    mcp_available_tools: "可用工具",
    mcp_status_active: "已启用",
    mcp_status_inactive: "未启用",
    mcp_toggle_server: "切换服务 {name}",
    mcp_server: "服务",
    mcp_raw_payload: "原始载荷",

    message_delete_success: "消息已删除",
    message_already_deleted: "消息已是删除状态",
    message_delete_failed: "删除消息失败：{reason}",
    server_toggle_success: "服务“{name}”已{state}",
    server_toggle_active: "启用",
    server_toggle_inactive: "停用",
    server_toggle_failed: "切换服务失败：{reason}",

    chat_input_placeholder_connecting: "连接中...",
    chat_input_placeholder_streaming: "正在等待回复...",
    chat_input_action_send: "发送",
    chat_input_action_stop: "停止",
    chat_input_action_clear: "清空输入",
    chat_input_expand: "展开",
    chat_input_collapse: "紧凑",
    chat_input_multiline_indicator: "已启用多行输入",
    chat_input_hint_shortcuts: "Shift+Enter 换行，Enter/Ctrl+Enter/Cmd+Enter 发送",
    chat_input_command_hint: "命令输入",
    chat_input_section_tools: "工具",
    chat_input_section_sessions: "会话",
    chat_input_section_actions: "操作",
    chat_sources_title: "引用来源",
    chat_sources_empty: "暂无可展示片段",

    message_actions_copy: "复制",
    message_actions_copied: "已复制",
    message_actions_copy_message: "复制消息",
    message_actions_copy_status: "消息已复制到剪贴板",
    message_actions_regenerate: "重新生成",
    message_actions_regenerate_response: "重新生成回复",
    message_actions_edit: "编辑",
    message_actions_edit_message: "编辑消息",
    message_actions_delete: "删除",
    message_actions_delete_message: "删除消息",
    message_actions_fork: "分叉",
    message_actions_fork_message: "从此消息分叉会话",
    message_actions_save: "保存",
    message_actions_cancel: "取消",
    message_edit_success: "消息已更新",
    message_edit_noop: "没有可保存的更改",
    message_edit_failed: "编辑消息失败：{reason}",
    message_regenerate_success: "已重新生成回复",
    message_regenerate_failed: "重新生成失败：{reason}",
    message_fork_success: "会话已分叉",
    message_fork_failed: "分叉会话失败：{reason}",
    session_fork_title: "分叉会话",
    chat_back_to_bottom: "回到底部",
    chat_message_variant_bubble: "气泡",
    chat_message_variant_docs: "文档",
    chat_autoscroll_following: "跟随",
    chat_autoscroll_paused: "已暂停",
    chat_loading_thinking: "正在思考",

    toaster_region_label: "通知",
    toaster_close: "关闭通知",
    toaster_hidden_count: "另有 {count} 条较早通知已隐藏",
    inspector_overview: "工作台概览",
    inspector_sources: "{count} 组来源",
    inspector_live: "最新执行事件",
    inspector_live_empty: "暂无实时事件。",
    inspector_telemetry: "遥测事件",
    inspector_telemetry_events: "{count} 条事件",
    inspector_telemetry_empty: "暂无遥测事件。"
  }
} as const;

export type UiMessageKey = keyof typeof uiMessages.en;

export function isUiLang(value: string): value is UiLang {
  return value === "en" || value === "zh";
}

export function getDefaultUiLang(): UiLang {
  if (typeof navigator === "undefined") {
    return "en";
  }
  return navigator.language.toLowerCase().startsWith("zh") ? "zh" : "en";
}
